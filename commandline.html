<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>F# Formatting: Command line tool
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A package for building great F# documentation, samples and blogs">
    <meta name="author" content="Tomas Petricek">

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="/FSharp.Formatting/content/style.css" />
    <script type="text/javascript" src="/FSharp.Formatting/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://fsharp.github.io/FSharp.Compiler.Service"><img src="https://fsharp.github.io/FSharp.Compiler.Service/images/logo.png" style="width:16px; height:16px;" /> F# Compiler Services</a></li>
          <li><a href="http://fsprojects.github.io/VisualFSharpPowerTools"><img src="http://fsprojects.github.io/VisualFSharpPowerTools/img/logo.png" style="width:16px; height:16px;" /> F# PowerTools</a></li>
          <li><a href="http://fsprojects.github.io/ProjectScaffold"><img src="https://fsprojects.github.io/ProjectScaffold/img/logo.png" style="width:16px; height:16px"> ProjectScaffold</a></li>
        </ul>
        <h3 class="muted"><a href="/FSharp.Formatting/index.html">FSharp.Formatting</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          <h1><a name="F-Formatting-Command-line-tool" class="anchor" href="#F-Formatting-Command-line-tool">F# Formatting: Command line tool</a></h1>
<p>If you prefer to use F# Formatting tools via the command line, you can use the
<code>FSharp.Formatting.CommandTool</code> package, which includes an executable <code>fsformatting.exe</code>
that gives you access to the most important functionality via a simple command line
interface. This might be a good idea if you prefer to run F# Formatting as a separate
process, e.g. for resource management reasons.</p>
<div class="row">
  <div class="span1"></div>
  <div class="span6">
    <div class="well well-small" id="nuget">
      The F# Formatting tool is available as <a href="https://nuget.org/packages/FSharp.Formatting.CommandTool">FSharp.Formatting.CommandTool on NuGet</a>.
      To install it, run the following command in the <a href="http://docs.nuget.org/docs/start-here/using-the-package-manager-console">Package Manager Console</a>:
      <pre>PM> Install-Package FSharp.Formatting.CommandTool</pre>
    </div>
  </div>
  <div class="span1"></div>
</div>
<p>Alternatively, you can download the <a href="https://github.com/fsprojects/FSharp.Formatting/zipball/master">source as a ZIP file</a>.</p>
<h2><a name="Using-the-tool" class="anchor" href="#Using-the-tool">Using the tool</a></h2>
<p>The tool option syntax is similar to git or other popular command line tools.
The format of the command line interface is:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="text">fsformatting[.exe] --help 
fsformatting[.exe] [command] [function] [options]
</code></pre></td></tr></table>
<p>In order to provide consistency across different shell environments, the command line tool appears to be case-insensitive by matching against lower case strings.</p>
<p>The <code>[command]</code> directive maps to the corresponding library namespace:</p>
<ul>
<li><code>literate</code> - Selects namespace <code>FSharp.Literate</code></li>
<li><code>metadataFormat</code> - Selects namespace <code>FSharp.MetadataFormat</code></li>
</ul>
<p>Currently, the command line tools exposes the functions <code>ProcessDirectory</code> of namespace <code>FSharp.Literate</code>
(for literate programming using F#) and <code>Generate</code> of namespace <code>FSharp.MetadataFormat</code> (for generating
library documentation from XML comments).</p>
<p>The <code>--help</code> option as single specifier displays the help message for all valid <code>[command] [function] [options]</code> combinations.</p>
<h2><a name="Literate-programming-command" class="anchor" href="#Literate-programming-command">Literate programming command</a></h2>
<p>The method <code>FSharp.Literate.ProcessDirectory</code> processes a directory containing a mix of Markdown documents <code>*.md</code> and F# Script files <code>*.fsx</code>
according to the concept of <a href="literate.html">Literate Programming</a>.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="text">fsformatting[.exe] literate --processDirectory [options]
</code></pre></td></tr></table>
<h3><a name="Required-options" class="anchor" href="#Required-options">Required options</a></h3>
<ul>
<li><code>--inputDirectory</code> - Input directory containing <code>*.fsx</code> and <code>*.md</code> files.</li>
</ul>
<h3><a name="Other-Options" class="anchor" href="#Other-Options">Other Options</a></h3>
<ul>
<li><code>--templateFile</code> -  Template file for formatting.</li>
<li><code>--outputDirectory</code> -  Output directory, defaults to input directory.</li>
<li><code>--format</code> -  Output format either <code>latex</code> or <code>html</code>, defaults to <code>html</code>.</li>
<li><code>--prefix</code> -  Prefix for formatting, defaults to <code>fs</code>.</li>
<li><code>--compilerOptions</code> -  Compiler Options.</li>
<li><code>--lineNumbers</code> -  Line number option, defaults to <code>true</code>.</li>
<li><code>--references</code> -  Turn all indirect links into references, defaults to <code>false</code>.</li>
<li><code>--fsieval</code> - Use the default FsiEvaluator, defaults to <code>false</code>.</li>
<li><code>--replacements</code> -  A whitespace separated list of string pairs as text replacement patterns for the format template file.</li>
<li><code>--includeSource</code> -  Include sourcecode in documentation, defaults to <code>false</code>.</li>
<li><code>--layoutRoots</code> -  Search directory list for the Razor Engine.</li>
<li><code>--help</code> -  Display the specific help message for <code>literate --processDirectory</code>.</li>
<li><code>--waitForKey</code> -  Wait for key before exit.</li>
</ul>
<h3><a name="Example" class="anchor" href="#Example">Example</a></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="text">fsformatting literate 
  --processDirectory --templateFile template-project.html 
  --format latex --replacements "page-author" "Tomas Petricek"
</code></pre></td></tr></table>
<h2><a name="Library-documentation-command" class="anchor" href="#Library-documentation-command">Library documentation command</a></h2>
<p>The <code>FSharp.MetadataFormat.Generate</code> method builds the <a href="http://fsprojects.github.io/FSharp.Formatting/metadata.html">library documentation</a> by reading
the meta-data from the <code>*.dll</code> files of the package and using the XML comments from matching <code>*.xml</code> files produced by the F# compiler.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="text">fsformatting[.exe] metadataFormat --generate [options]
</code></pre></td></tr></table>
<h3><a name="Required-options-1" class="anchor" href="#Required-options-1">Required options</a></h3>
<ul>
<li><code>--dllFiles</code> -  List of <code>dll</code> input files.</li>
<li><code>--outDir</code> -  Output directory.</li>
<li><code>--layoutRoots</code> -  Search directory list for the Razor Engine templates.</li>
</ul>
<h3><a name="Other-options" class="anchor" href="#Other-options">Other options</a></h3>
<ul>
<li><code>--parameters</code> -  Property settings for the Razor Engine.</li>
<li><code>--namespaceTemplate</code> -  Namespace template file for formatting, defaults to <code>namespaces.cshtml</code>.</li>
<li><code>--moduleTemplate</code> -  Module template file for formatting, defaults to <code>module.cshtml</code>.</li>
<li><code>--typeTemplate</code> -  Type template file for formatting, defaults to <code>type.cshtml</code>.</li>
<li><code>--xmlFile</code> -  Single XML file to use for all <code>dll</code> files, otherwise using <code>file.xml</code> for each <code>file.dll</code>.</li>
<li><code>--sourceRepo</code> -  Source repository URL; silently ignored, if a source repository folder is not provided.</li>
<li><code>--sourceFolder</code> -  Source repository folder; silently ignored, if a source repository URL is not provided.</li>
<li><code>--libDirs</code> - Search directory list for library references.</li>
<li><code>--help</code> -  Display the specific help message for <code>metadataFormat --generate</code>.</li>
<li><code>--waitForKey</code> -  Wait for key before exit.</li>
</ul>
<h2><a name="Examples-and-configuration-considerations" class="anchor" href="#Examples-and-configuration-considerations">Examples and configuration considerations</a></h2>
<h3><a name="Basic-Example" class="anchor" href="#Basic-Example">Basic Example</a></h3>
<p>According to the previous section, a minimum configuration for generating the library documentation from <code>*.dll</code> files
could be configured by:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="text">fsformatting metadataFormat 
  --generate 
  --dllFiles lib1.dll "lib 2.dll" 
  --outDir "../api-docs" 
  --layoutRoots templates
</code></pre></td></tr></table>
<p>The following underlying configuration assumptions need to be considered when you adapt this example to your own project:</p>
<ol>
<li>
<p>The commandline tool is properly installed in a directory of your system´s binaries search path.
If you decide to call the tool from within the installation directory or by using an absolute path, you will have to take the
path resolution implications of your platform (OS and shell) for the other tool options into account.
After a clean install, the tool´s directory contains all necessary FSharp.Formatting library files, i.e. there would not be unresolved dependencies.
The installation of the commandline tool only <a href="https://nuget.org/packages/FSharp.Formatting.CommandTool">via NuGet</a> is sufficient for this purpose.</p>
<ul>
<li>
<p>If you have other requirements which demand the installation of the full FSharp.Formatting package, you should consider the alternative
configuration options below.</p>
</li>
<li>
<p>If you are using <a href="http://fsharp.github.io/FAKE/">FAKE - F# Make</a>, a separate installation of the commandline tool is not recommended
as FAKE already contains this tool, see further recommendations below.</p>
</li>
</ul>
</li>
<li><p>On a Mono platform, the commandline needs to be prefixed by the appropriate <code>mono</code> command that invokes the necessary .NET v4.0 environment for FSharp.Formatting on your platform.</p></li>
<li>
<p>The example commandline is executed in the working directory that contains the target files <code>lib1.dll</code> and <code>lib 2.dll</code> as well as the
corresponding meta-data files <code>lib1.xml</code> and <code>lib 2.xml</code>, which are the result of a previous build process of your project.</p>
</li>
<li>The output directory is in this example within the parent directory of your working directory.</li>
<li>
<p>The example assumes that the necessary <code>template.html</code> file (and in case, those files it draws in as dependencies) reside in the subdirectory <code>templates</code> of your working directory.
It is implicitely also assumed that this template does not contain substitution parameters. If you want to use this feature, you need to add the desired parameter list.
For example, if you want to experiment with the <a href="https://github.com/fsprojects/FSharp.Formatting/blob/master/docs/tools/template.html">template file of the FSharp.Formatting project</a>,
you copy this file into the subdirectory <code>templates</code> of your working directory and specify the
<a href="https://github.com/fsprojects/FSharp.Formatting/blob/master/docs/tools/generate.fsx#L24">necessary substitution parameters</a> as follows:</p>
</li>
</ol>
<div></div>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="text">fsformatting metadataFormat 
  --generate 
  --dllFiles lib1.dll "lib 2.dll" 
  --outDir "../api-docs" 
  --layoutRoots templates
  --parameters "page-author" "Your name(s)"
                "page-description" "A package for ..."
                "github-link" "http://github.com/yourname/project"
                "project-name" "your project name"
                "root" "http://yourname.github.io/project"
</code></pre></td></tr></table>
<p>Note: depending on the quote evaluation scheme of your OS and shell, you may encounter unexpected errors due to misinterpretation of the string parameters.</p>
<h3><a name="Alternative-configuration-options" class="anchor" href="#Alternative-configuration-options">Alternative configuration options</a></h3>
<p>Instead of using the commandline tool, you may want to consider using the <a href="https://visualfsharp.codeplex.com/workitem/25">F# interpreter <code>#!</code> compatibility</a> coming with F# 3.1.2.
This feature allows you (on posix systems) to execute F# scripts <code>*.fsx</code> directly from a posix shell. In order to use this feature, for example, on a typical OS X or Linux system, you add as the first line, at the first position in your <code>fsx</code> file the F# interpreter invocation command <code>#!/usr/bin/env fsharpi --exec</code>. Alternatively, you could use the direct call to <code>fsi.exe</code>, which is part of the standard F# installation, to run your <code>generate.fsx</code> file on Windows via <code>fsi --exec generate.fsx</code> and on Mono platforms with <code>mono fsi.exe --exec generate.fsx</code> (provided proper path settings).</p>
<p>As template for the <code>generate.fsx</code> file, you should refer to the recommended <a href="https://github.com/fsprojects/ProjectScaffold/blob/master/docs/tools/generate.template">template file</a>, that should be easily adapted to your project´s needs. The tradeoff in both cases is that instead of installing the FSharp.Formatting commandline tool, you have to install F# and the FSharp.Formatting library on your system. As the commandline tool contains the FSharp.Formatting library and the Fsharp compiler service, the overhead is much less than it might look at first glance.</p>
<p>If you already use <a href="http://fsharp.github.io">FAKE</a> in your project, it is recommended to apply the predefined <a href="http://fsharp.github.io/FAKE/apidocs/fake-fsharpformatting.html">FAKE commands</a>
for the document creation process. FAKE will install the FSharp.Formatting commandline tool as a dependency. Hence, a separate installation should be omitted in order to avoid
a cluttered environment on your system. Alternatively, you can also use a <a href="https://github.com/fsprojects/FSharp.Formatting/blob/master/build.fsx#L176">FAKE target definition</a>,
that invokes the recommended <a href="https://github.com/fsprojects/ProjectScaffold/blob/master/docs/tools/generate.template">template file</a> as in the previous configuration option.</p>


        </div>
        <div class="span3">
          <a href="/FSharp.Formatting/index.html">
            <img src="/FSharp.Formatting/misc/logo.png" style="width:140px;height:140px;margin:10px 0px 0px 35px;border-style:none;" />
          </a>

          <ul class="nav nav-list" id="menu">
            <li class="nav-header">FSharp.Formatting</li>
            <li><a href="/FSharp.Formatting">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/FSharp.Formatting">Get Library via NuGet</a></li>
            <li><a href="http://github.com/fsprojects/FSharp.Formatting">Source Code on GitHub</a></li>
            <li><a href="http://github.com/fsprojects/FSharp.Formatting/blob/master/LICENSE.md">License (Apache 2.0)</a></li>
            <li><a href="http://github.com/fsprojects/FSharp.Formatting/blob/master/RELEASE_NOTES.md">Release Notes</a></li>

            <li class="nav-header">Using F# Formatting</li>
            <li><a href="/FSharp.Formatting/literate.html">Literate programming</a></li>
            <li><a href="/FSharp.Formatting/evaluation.html">Embedding output</a></li>
            <li><a href="/FSharp.Formatting/markdown.html">Markdown parser</a></li>
            <li><a href="/FSharp.Formatting/codeformat.html">F# code formatting</a></li>
            <li><a href="/FSharp.Formatting/metadata.html">Library documentation</a></li>
            <li><a href="/FSharp.Formatting/commandline.html">Using command line tool</a></li>

            <li class="nav-header">Examples</li>
            <li><a href="/FSharp.Formatting/sidescript.html">Literate F# script</a></li>
            <li><a href="/FSharp.Formatting/sidemarkdown.html">Literate Markdown file</a></li>
            <li><a href="/FSharp.Formatting/sideextensions.html">Markdown extensions</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/FSharp.Formatting/reference/index.html">API Reference</a></li>
            <li><a href="/FSharp.Formatting/development.html">Contribute / Development Topics</a></li>
            <li><a href="/FSharp.Formatting/diagnostics.html">Diagnostics &amp; debugging</a></li>
            <li class="divider"></li>
            <li><a href="/FSharp.Formatting/reference/fsharp-markdown-markdown.html">Markdown type</a></li>
            <li><a href="/FSharp.Formatting/reference/fsharp-codeformat-codeformat.html">CodeFormat type</a></li>
            <li><a href="/FSharp.Formatting/reference/fsharp-literate-literate.html">Literate type</a></li>
            <li><a href="/FSharp.Formatting/reference/fsharp-metadataformat-metadataformat.html">MetadataFormat type</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/fsprojects/FSharp.Formatting"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
  </body>
  </html>
