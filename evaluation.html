<!DOCTYPE html>
<html lang="en" data-root="https://fsprojects.github.io/FSharp.Formatting/">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Tomas Petricek; Oleg Pestov; Anh-Dung Phan; Xiang Zhang; Matthias Dittrich; Don Syme" name="author">
    <!-- Opengraph properties (https://ogp.me/) -->
    <meta property="og:site_name" content="FSharp.Formatting">
    <meta property="og:title" content="Embedding script output
" />
    <meta property="og:url" content="https://fsprojects.github.io/FSharp.Formatting/evaluation.html">
    <meta property="og:type" content="website" />
    <!-- Twitter cards (https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/summary-card-with-large-image) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="https://fsprojects.github.io/FSharp.Formatting/">
    <meta name="twitter:title" content="Embedding script output
">
    
    <title>Embedding script output
 | FSharp.Formatting</title>
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://fsprojects.github.io/FSharp.Formatting/img/favicon.ico" rel="icon" sizes="32x32" type="image/png"/>
    <script type="application/javascript" src="https://fsprojects.github.io/FSharp.Formatting/content/fsdocs-theme-set-dark.js"></script>
    <script type="application/javascript" src="https://fsprojects.github.io/FSharp.Formatting/content/fsdocs-details-set-expanded.js"></script>
    <link href="https://fsprojects.github.io/FSharp.Formatting/content/fsdocs-default.css" rel="stylesheet" type="text/css"/>
    <link href="https://fsprojects.github.io/FSharp.Formatting/content/fsdocs-theme.css" rel="stylesheet" type="text/css"/>
    
    
</head>
<body class="content">
<header>
    <div class="start">
        <div id="menu-toggle">
            <iconify-icon class="icon closed" height="22" icon="eva:menu-fill" width="22"></iconify-icon>
            <iconify-icon class="icon open" height="22" icon="mi:close" width="22"></iconify-icon>
            <input type="checkbox" name="mobile-menu" />
            <ul class="menu">
                <li class="nav-header">Links</li>
                <li class="license-menu-item builtin-menu-item nav-item"><a class="nav-link" href="https://github.com/fsprojects/FSharp.Formatting/blob/master/LICENSE.md">License</a>
                </li>
                <li class="release-notes-menu-item builtin-menu-item nav-item"><a class="nav-link"
                                        href="https://github.com/fsprojects/FSharp.Formatting/blob/master/RELEASE_NOTES.md">Release
                    Notes</a></li>
                <li class="repository-menu-item builtin-menu-item nav-item"><a class="nav-link" href="https://github.com/fsprojects/FSharp.Formatting/">Source
                    Repository</a></li>
                <li class="nav-header active">
  Documentation
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/zero-to-hero.html">
    Getting Started
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/commandline.html">
    Command line

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/literate.html">
    Literate Scripts

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/literate-notebook.html">
    Literate Notebooks

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/content.html">
    Creating Content

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/apidocs.html">
    Generating API Docs
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/evaluation.html">
    Embedding script output

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/styling.html">
    Customization and Styling

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/users.html">
    Users of FSharp.Formatting

  </a>
</li>             
<li class="nav-header ">
  Examples
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/sidebyside/sidescript.html">
    Literate Script
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/sidebyside/sidemarkdown.html">
    Markdown Content
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/sidebyside/sideextensions.html">
    Markdown LaTeX
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/templates/leftside/styling.html">
    Example: Styling for Right-Side Navigation Bar

  </a>
</li>             
<li class="nav-header ">
  Advanced
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/codeformat.html">
    Code formatting

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/upgrade.html">
    Upgrading to fsdocs

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/markdown.html">
    Markdown parser

  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
        <a href="https://fsprojects.github.io/FSharp.Formatting/">
            <img alt="Header menu logo" src="https://fsprojects.github.io/FSharp.Formatting/img/logo.png">
            <strong>FSharp.Formatting</strong>
        </a>
    </div>
    <div class="end">
        <a href="https://github.com/fsprojects/FSharp.Formatting/" target="_blank">
            <iconify-icon icon="uil:github" width="26" height="26"></iconify-icon>
        </a>
        <iconify-icon id="search-btn" icon="carbon:search" class="search" width="24" height="24"></iconify-icon>
        <fsdocs-theme-toggle></fsdocs-theme-toggle>
    </div>
</header>
<aside id="fsdocs-main-menu">
    <ul class="menu">
        <li class="nav-header">Links</li>
        <li class="license-menu-item builtin-menu-item nav-item"><a class="nav-link" href="https://github.com/fsprojects/FSharp.Formatting/blob/master/LICENSE.md">License</a>
        </li>
        <li class="release-notes-menu-item builtin-menu-item nav-item"><a class="nav-link"
                                href="https://github.com/fsprojects/FSharp.Formatting/blob/master/RELEASE_NOTES.md">Release
            Notes</a></li>
        <li class="repository-menu-item builtin-menu-item nav-item"><a class="nav-link" href="https://github.com/fsprojects/FSharp.Formatting/">Source
            Repository</a></li>
        <li class="nav-header active">
  Documentation
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/zero-to-hero.html">
    Getting Started
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/commandline.html">
    Command line

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/literate.html">
    Literate Scripts

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/literate-notebook.html">
    Literate Notebooks

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/content.html">
    Creating Content

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/apidocs.html">
    Generating API Docs
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/evaluation.html">
    Embedding script output

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/styling.html">
    Customization and Styling

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/users.html">
    Users of FSharp.Formatting

  </a>
</li>             
<li class="nav-header ">
  Examples
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/sidebyside/sidescript.html">
    Literate Script
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/sidebyside/sidemarkdown.html">
    Markdown Content
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/sidebyside/sideextensions.html">
    Markdown LaTeX
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/templates/leftside/styling.html">
    Example: Styling for Right-Side Navigation Bar

  </a>
</li>             
<li class="nav-header ">
  Advanced
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/codeformat.html">
    Code formatting

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/upgrade.html">
    Upgrading to fsdocs

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/markdown.html">
    Markdown parser

  </a>
</li>
        <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Formatting/reference/index.html">
    All Namespaces
  </a>
</li>
    </ul>
</aside>
<main>
    <div id="content">
        
<p><a href="https://mybinder.org/v2/gh/fsprojects/fsharp.formatting/gh-pages?filepath=evaluation.ipynb"><img src="img/badge-binder.svg" alt="Binder" /></a>&emsp;
<a href="https://fsprojects.github.io/FSharp.Formatting//evaluation.fsx"><img src="img/badge-script.svg" alt="Script" /></a>&emsp;
<a href="https://fsprojects.github.io/FSharp.Formatting//evaluation.ipynb"><img src="img/badge-notebook.svg" alt="Notebook" /></a></p>
<h1><a name="Embedding-script-output" class="anchor" href="#Embedding-script-output">Embedding script output</a></h1>
<p>For literate F# scripts, you may embed the result of running the script as part of the literate output.
This is a feature of the functions discussed in <a href="literate.html">literate programming</a> and
it is implemented using the <a href="http://fsharp.github.io/FSharp.Compiler.Service/">F# Compiler service</a>.</p>
<h2><a name="Including-Console-Output" class="anchor" href="#Including-Console-Output">Including Console Output</a></h2>
<p>To include the Console output use <code>include-output</code>:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">test</span> <span class="o">=</span> <span class="n">40</span> <span class="o">+</span> <span class="n">2</span>

<span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="fn">printf</span> <span class="s">&quot;A result is: </span><span class="pf">%d</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs1', 3)" onmouseover="showTip(event, 'fs1', 3)" class="id">test</span>
<span class="c">(*** include-output ***)</span>
</code></pre>
<p>The script defines a variable <code>test</code> and then prints it. The console output is included
in the output.</p>
<p>To include the a formatted value use <code>include-it</code>:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[</span> <span class="n">0</span> <span class="o">..</span> <span class="n">99</span> <span class="pn">]</span>

<span class="c">(*** include-it ***)</span>
</code></pre>
<p>To include the meta output of F# Interactive processing such as type signatures use <code>(*** include-fsi-output ***)</code>:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 4)" onmouseover="showTip(event, 'fs1', 4)" class="id">test</span> <span class="o">=</span> <span class="n">40</span> <span class="o">+</span> <span class="n">3</span>

<span class="c">(*** include-fsi-output ***)</span>
</code></pre>
<p>To include both console output and F# Interactive output blended use <code>(*** include-fsi-merged-output ***)</code>.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 5)" onmouseover="showTip(event, 'fs1', 5)" class="id">test</span> <span class="o">=</span> <span class="n">40</span> <span class="o">+</span> <span class="n">4</span>
<span class="c">(*** include-fsi-merged-output ***)</span>
</code></pre>
<p>You can use the same commands with a named snippet:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">(*** include-it: test ***)</span>
<span class="c">(*** include-fsi-output: test ***)</span>
<span class="c">(*** include-output: test ***)</span>
</code></pre>
<p>You can use the <code>include-value</code> command to format a specific value:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 6)" onmouseover="showTip(event, 'fs3', 6)" class="id">value1</span> <span class="o">=</span> <span class="pn">[</span> <span class="n">0</span> <span class="o">..</span> <span class="n">50</span> <span class="pn">]</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 7)" onmouseover="showTip(event, 'fs4', 7)" class="id">value2</span> <span class="o">=</span> <span class="pn">[</span> <span class="n">51</span> <span class="o">..</span> <span class="n">100</span> <span class="pn">]</span>
<span class="c">(*** include-value: value1 ***)</span>
</code></pre>
<h2><a name="Using-AddPrinter-and-AddHtmlPrinter" class="anchor" href="#Using-AddPrinter-and-AddHtmlPrinter">Using AddPrinter and AddHtmlPrinter</a></h2>
<p>You can use <code>fsi.AddPrinter</code>, <code>fsi.AddPrintTransformer</code> and <code>fsi.AddHtmlPrinter</code> to extend the formatting of objects.</p>
<h2><a name="Emitting-Raw-Text" class="anchor" href="#Emitting-Raw-Text">Emitting Raw Text</a></h2>
<p>To emit raw text in F# literate scripts use the following:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">(**</span>
<span class="c">	(*** raw ***)</span>
<span class="c">	Some raw text.</span>
<span class="c">*)</span>
</code></pre>
<p>which would emit</p>
<pre>
Some raw text.
</pre>
<p>directly into the document.</p>
<h2><a name="F-Formatting-as-a-Library-Specifying-the-Evaluator-and-Formatting" class="anchor" href="#F-Formatting-as-a-Library-Specifying-the-Evaluator-and-Formatting">F# Formatting as a Library:  Specifying the Evaluator and Formatting</a></h2>
<p>If using F# Formatting as a library the embedding of F# output requires specifying an additional parameter to the
parsing functions discussed in <a href="literate.html">literate programming documentation</a>.
Assuming you have all the references in place, you can now create an instance of
<a href="https://fsprojects.github.io/FSharp.Formatting/reference/fsharp-formatting-literate-evaluation-fsievaluator.html">FsiEvaluator</a> that represents a wrapper for F# interactive and pass it to all the
functions that parse script files or process script files:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs5', 8)" onmouseover="showTip(event, 'fs5', 8)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 9)" onmouseover="showTip(event, 'fs6', 9)" class="id">Formatting</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="id">Literate</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs5', 11)" onmouseover="showTip(event, 'fs5', 11)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 12)" onmouseover="showTip(event, 'fs6', 12)" class="id">Formatting</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 13)" onmouseover="showTip(event, 'fs7', 13)" class="id">Literate</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs8', 14)" onmouseover="showTip(event, 'fs8', 14)" class="id">Evaluation</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs5', 15)" onmouseover="showTip(event, 'fs5', 15)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 16)" onmouseover="showTip(event, 'fs6', 16)" class="id">Formatting</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 17)" onmouseover="showTip(event, 'fs9', 17)" class="id">Markdown</span>

<span class="c">// Sample literate content</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 18)" onmouseover="showTip(event, 'fs10', 18)" class="id">content</span> <span class="o">=</span>
    <span class="s">&quot;&quot;&quot;</span>
<span class="s">let a = 10</span>
<span class="s">(*** include-value:a ***)&quot;&quot;&quot;</span>

<span class="c">// Create evaluator and parse script</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 19)" onmouseover="showTip(event, 'fs11', 19)" class="id">fsi</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 20)" onmouseover="showTip(event, 'fs12', 20)" class="fn">FsiEvaluator</span><span class="pn">(</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 21)" onmouseover="showTip(event, 'fs13', 21)" class="id">doc</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 22)" onmouseover="showTip(event, 'fs14', 22)" class="rt">Literate</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 23)" onmouseover="showTip(event, 'fs15', 23)" class="id">ParseScriptString</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 24)" onmouseover="showTip(event, 'fs10', 24)" class="id">content</span><span class="pn">,</span> <span class="fn">fsiEvaluator</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 25)" onmouseover="showTip(event, 'fs11', 25)" class="id">fsi</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs14', 26)" onmouseover="showTip(event, 'fs14', 26)" class="rt">Literate</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 27)" onmouseover="showTip(event, 'fs16', 27)" class="id">ToHtml</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs13', 28)" onmouseover="showTip(event, 'fs13', 28)" class="id">doc</span><span class="pn">)</span>
</code></pre>
<p>When the <code>fsiEvaluator</code> parameter is specified, the script is evaluated and so you
can use additional commands such as <code>include-value</code>. When the evaluator is <em>not</em> specified,
it is not created automatically, so the functionality is not available (this way,
you won't accidentally run unexpected code!)</p>
<p>If you specify the <code>fsiEvaluator</code> parameter, but don't want a specific snippet to be evaluated
(because it might throw an exception, for example), you can use the <code>(*** do-not-eval ***)</code>
command.</p>
<p>The constructor of <a href="https://fsprojects.github.io/FSharp.Formatting/reference/fsharp-formatting-literate-evaluation-fsievaluator.html">FsiEvaluator</a> takes command line parameters for <code>fsi.exe</code> that can
be used to specify, for example, defined symbols and other attributes for F# Interactive.</p>
<p>You can also subscribe to the <code>EvaluationFailed</code> event which is fired whenever the evaluation
of an expression fails. You can use that to do tests that verify that all of the code in your
documentation executes without errors.</p>
<h2><a name="F-Formatting-as-a-Library-Custom-formatting-functions" class="anchor" href="#F-Formatting-as-a-Library-Custom-formatting-functions">F# Formatting as a Library: Custom formatting functions</a></h2>
<p>As mentioned earlier, values are formatted using a simple <code>"%A"</code> formatter by default.
However, you can specify a formatting function that provides nicer formatting for values
of certain types. For example, let's say that we would want to format F# lists such as
<code>[1; 2; 3]</code> as HTML ordered lists <code>&lt;ol&gt;</code>.</p>
<p>This can be done by calling <a href="https://fsprojects.github.io/FSharp.Formatting/reference/fsharp-formatting-literate-evaluation-fsievaluator.html#RegisterTransformation">FsiEvaluator.RegisterTransformation</a> on the <code>FsiEvaluator</code> instance:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create evaluator &amp; register simple formatter for lists</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 29)" onmouseover="showTip(event, 'fs17', 29)" class="id">fsiEvaluator</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 30)" onmouseover="showTip(event, 'fs12', 30)" class="fn">FsiEvaluator</span><span class="pn">(</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs17', 31)" onmouseover="showTip(event, 'fs17', 31)" class="id">fsiEvaluator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs18', 32)" onmouseover="showTip(event, 'fs18', 32)" class="id">RegisterTransformation</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs19', 33)" onmouseover="showTip(event, 'fs19', 33)" class="fn">o</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs20', 34)" onmouseover="showTip(event, 'fs20', 34)" class="fn">ty</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs21', 35)" onmouseover="showTip(event, 'fs21', 35)" class="id">_executionCount</span><span class="pn">)</span> <span class="k">-&gt;</span>
    <span class="c">// If the type of value is an F# list, format it nicely</span>
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs20', 36)" onmouseover="showTip(event, 'fs20', 36)" class="fn">ty</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs22', 37)" onmouseover="showTip(event, 'fs22', 37)" class="id">IsGenericType</span>
       <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs20', 38)" onmouseover="showTip(event, 'fs20', 38)" class="fn">ty</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs23', 39)" onmouseover="showTip(event, 'fs23', 39)" class="id">GetGenericTypeDefinition</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 40)" onmouseover="showTip(event, 'fs24', 40)" class="k">typedefof</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs25', 41)" onmouseover="showTip(event, 'fs25', 41)" class="rt">list</span><span class="pn">&lt;</span><span class="id">_</span><span class="pn">&gt;</span><span class="pn">&gt;</span> <span class="k">then</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 42)" onmouseover="showTip(event, 'fs26', 42)" class="fn">items</span> <span class="o">=</span>
            <span class="c">// Get items as objects and create a paragraph for each item</span>
            <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs27', 43)" onmouseover="showTip(event, 'fs27', 43)" class="fn">it</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs28', 44)" onmouseover="showTip(event, 'fs28', 44)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 45)" onmouseover="showTip(event, 'fs29', 45)" class="id">cast</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs30', 46)" onmouseover="showTip(event, 'fs30', 46)" class="rt">obj</span><span class="pn">&gt;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs31', 47)" onmouseover="showTip(event, 'fs31', 47)" class="fn">unbox</span> <span onmouseout="hideTip(event, 'fs19', 48)" onmouseover="showTip(event, 'fs19', 48)" class="fn">o</span><span class="pn">)</span> <span class="k">-&gt;</span> <span class="pn">[</span> <span onmouseout="hideTip(event, 'fs32', 49)" onmouseover="showTip(event, 'fs32', 49)" class="uc">Paragraph</span><span class="pn">(</span><span class="pn">[</span> <span onmouseout="hideTip(event, 'fs33', 50)" onmouseover="showTip(event, 'fs33', 50)" class="uc">Literal</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs27', 51)" onmouseover="showTip(event, 'fs27', 51)" class="fn">it</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs34', 52)" onmouseover="showTip(event, 'fs34', 52)" class="id">ToString</span><span class="pn">(</span><span class="pn">)</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs35', 53)" onmouseover="showTip(event, 'fs35', 53)" class="uc">None</span><span class="pn">)</span> <span class="pn">]</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs35', 54)" onmouseover="showTip(event, 'fs35', 54)" class="uc">None</span><span class="pn">)</span> <span class="pn">]</span> <span class="pn">]</span>
        <span class="c">// Return option value (success) with ordered list</span>
        <span onmouseout="hideTip(event, 'fs36', 55)" onmouseover="showTip(event, 'fs36', 55)" class="uc">Some</span> <span class="pn">[</span> <span onmouseout="hideTip(event, 'fs37', 56)" onmouseover="showTip(event, 'fs37', 56)" class="uc">ListBlock</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs38', 57)" onmouseover="showTip(event, 'fs38', 57)" class="vt">MarkdownListKind</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs39', 58)" onmouseover="showTip(event, 'fs39', 58)" class="id">Ordered</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs26', 59)" onmouseover="showTip(event, 'fs26', 59)" class="fn">items</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs35', 60)" onmouseover="showTip(event, 'fs35', 60)" class="uc">None</span><span class="pn">)</span> <span class="pn">]</span>
    <span class="k">else</span>
        <span onmouseout="hideTip(event, 'fs35', 61)" onmouseover="showTip(event, 'fs35', 61)" class="uc">None</span><span class="pn">)</span>
</code></pre>
<p>The function is called with two arguments - <code>o</code> is the value to be formatted, and <code>ty</code>
is the static type of the value (as inferred by the F# compiler). The sample checks
that the type of the value is a list (containing values of any type), and then it
casts all values in the list to <code>obj</code> (for simplicity). Then, we generate Markdown
blocks representing an ordered list. This means that the code will work for both
LaTeX and HTML formatting - but if you only need one, you can simply produce HTML and
embed it in <code>InlineHtmlBlock</code>.</p>
<p>To use the new <code>FsiEvaluator</code>, we can use the same style as earlier. This time, we format
a simple list containing strings:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 62)" onmouseover="showTip(event, 'fs40', 62)" class="id">listy</span> <span class="o">=</span>
    <span class="s">&quot;&quot;&quot;</span>
<span class="s">### Formatting demo</span>
<span class="s">let test = [&quot;one&quot;;&quot;two&quot;;&quot;three&quot;]</span>
<span class="s">(*** include-value:test ***)&quot;&quot;&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs41', 63)" onmouseover="showTip(event, 'fs41', 63)" class="id">docOl</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 64)" onmouseover="showTip(event, 'fs14', 64)" class="rt">Literate</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 65)" onmouseover="showTip(event, 'fs15', 65)" class="id">ParseScriptString</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs40', 66)" onmouseover="showTip(event, 'fs40', 66)" class="id">listy</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs17', 67)" onmouseover="showTip(event, 'fs17', 67)" class="fn">fsiEvaluator</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs17', 68)" onmouseover="showTip(event, 'fs17', 68)" class="id">fsiEvaluator</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs14', 69)" onmouseover="showTip(event, 'fs14', 69)" class="rt">Literate</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 70)" onmouseover="showTip(event, 'fs16', 70)" class="id">ToHtml</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs41', 71)" onmouseover="showTip(event, 'fs41', 71)" class="id">docOl</span><span class="pn">)</span>
</code></pre>
<p>The resulting HTML formatting of the document contains the snippet that defines <code>test</code>,
followed by a nicely formatted ordered list:</p>
<blockquote>
<h3>Formatting demo</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <spanclass="i">test</span> <span class="o">=</span> [<span class="s">&quot;</span><span class="s">one</span><span class="s">&quot;</span>;<span class="s">&quot;</span><span class="s">two</span><span class="s">&quot;</span>;<span class="s">&quot;</span><span class="s">three</span><span class="s">&quot;</span>]</pre>
</td>
</tr>
</table>
<ol>
<li><p>one</p></li>
<li><p>two</p></li>
<li><p>three</p></li>
</ol>
</blockquote>

        <div class="fsdocs-tip" id="fs1">val test: int</div>
<div class="fsdocs-tip" id="fs2">val printf: format: Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs3">val value1: int list</div>
<div class="fsdocs-tip" id="fs4">val value2: int list</div>
<div class="fsdocs-tip" id="fs5">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="fsdocs-tip" id="fs6">namespace FSharp.Formatting</div>
<div class="fsdocs-tip" id="fs7">namespace FSharp.Formatting.Literate</div>
<div class="fsdocs-tip" id="fs8">namespace FSharp.Formatting.Literate.Evaluation</div>
<div class="fsdocs-tip" id="fs9">namespace FSharp.Formatting.Markdown</div>
<div class="fsdocs-tip" id="fs10">val content: string</div>
<div class="fsdocs-tip" id="fs11">val fsi: FsiEvaluator</div>
<div class="fsdocs-tip" id="fs12">Multiple items<br />type FsiEvaluator =
  interface IFsiEvaluator
  new: ?options: string array * ?fsiObj: obj * ?addHtmlPrinter: bool * ?discardStdOut: bool * ?disableFsiObj: bool * ?onError: (string -&gt; unit) -&gt; FsiEvaluator
  member RegisterTransformation: f: (obj * Type * int -&gt; MarkdownParagraph list option) -&gt; unit
  member EvaluationFailed: IEvent&lt;FsiEvaluationFailedInfo&gt; with get<br /><em>&lt;summary&gt;
 A wrapper for F# interactive service that is used to evaluate inline snippets
&lt;/summary&gt;</em><br /><br />--------------------<br />new: ?options: string array * ?fsiObj: obj * ?addHtmlPrinter: bool * ?discardStdOut: bool * ?disableFsiObj: bool * ?onError: (string -&gt; unit) -&gt; FsiEvaluator</div>
<div class="fsdocs-tip" id="fs13">val doc: LiterateDocument</div>
<div class="fsdocs-tip" id="fs14">type Literate =
  static member ConvertMarkdownFile: input: string * ?template: string * ?output: string * ?outputKind: OutputKind * ?prefix: string * ?fscOptions: string * ?lineNumbers: bool * ?references: bool * ?substitutions: (ParamKey * string) list * ?generateAnchors: bool * ?imageSaver: (string -&gt; string) * ?rootInputFolder: string * ?crefResolver: (string -&gt; (string * string) option) * ?mdlinkResolver: (string -&gt; string option) * ?onError: (string -&gt; unit) * ?filesWithFrontMatter: FrontMatterFile array -&gt; unit
  static member ConvertScriptFile: input: string * ?template: string * ?output: string * ?outputKind: OutputKind * ?prefix: string * ?fscOptions: string * ?lineNumbers: bool * ?references: bool * ?fsiEvaluator: IFsiEvaluator * ?substitutions: (ParamKey * string) list * ?generateAnchors: bool * ?imageSaver: (string -&gt; string) * ?rootInputFolder: string * ?crefResolver: (string -&gt; (string * string) option) * ?mdlinkResolver: (string -&gt; string option) * ?onError: (string -&gt; unit) * ?filesWithFrontMatter: FrontMatterFile array -&gt; unit
  static member ParseAndCheckScriptFile: path: string * ?fscOptions: string * ?definedSymbols: string list * ?references: bool * ?fsiEvaluator: IFsiEvaluator * ?parseOptions: MarkdownParseOptions * ?rootInputFolder: string * ?onError: (string -&gt; unit) -&gt; LiterateDocument
  static member ParseMarkdownFile: path: string * ?fscOptions: string * ?definedSymbols: string list * ?references: bool * ?fsiEvaluator: IFsiEvaluator * ?parseOptions: MarkdownParseOptions * ?rootInputFolder: string * ?onError: (string -&gt; unit) -&gt; LiterateDocument
  static member ParseMarkdownString: content: string * ?path: string * ?fscOptions: string * ?definedSymbols: string list * ?references: bool * ?fsiEvaluator: IFsiEvaluator * ?parseOptions: MarkdownParseOptions * ?rootInputFolder: string * ?onError: (string -&gt; unit) -&gt; LiterateDocument
  static member ParsePynbString: content: string * ?path: string * ?definedSymbols: string list * ?references: bool * ?parseOptions: MarkdownParseOptions * ?rootInputFolder: string * ?onError: (string -&gt; unit) -&gt; LiterateDocument
  static member ParseScriptString: content: string * ?path: string * ?fscOptions: string * ?definedSymbols: string list * ?references: bool * ?fsiEvaluator: IFsiEvaluator * ?parseOptions: MarkdownParseOptions * ?rootInputFolder: string * ?onError: (string -&gt; unit) -&gt; LiterateDocument
  static member ToFsx: doc: LiterateDocument * ?substitutions: (ParamKey * string) list * ?crefResolver: (string -&gt; (string * string) option) * ?mdlinkResolver: (string -&gt; string option) -&gt; string
  static member ToHtml: doc: LiterateDocument * ?prefix: string * ?lineNumbers: bool * ?generateAnchors: bool * ?substitutions: (ParamKey * string) list * ?crefResolver: (string -&gt; (string * string) option) * ?mdlinkResolver: (string -&gt; string option) * ?tokenKindToCss: (TokenKind -&gt; string) -&gt; string
  static member ToLatex: doc: LiterateDocument * ?prefix: string * ?lineNumbers: bool * ?generateAnchors: bool * ?substitutions: (ParamKey * string) list * ?crefResolver: (string -&gt; (string * string) option) * ?mdlinkResolver: (string -&gt; string option) -&gt; string
  ...<br /><em>&lt;summary&gt;
 This type provides three simple methods for calling the literate programming tool.
 The &lt;c&gt;ConvertMarkdownFile&lt;/c&gt; and &lt;c&gt;ConvertScriptFile&lt;/c&gt; methods process a single Markdown document
 and F# script, respectively. The &lt;c&gt;ConvertDirectory&lt;/c&gt; method handles an entire directory tree
 (looking for &lt;c&gt;*.fsx&lt;/c&gt; and &lt;c&gt;*.md&lt;/c&gt; files).
 &lt;/summary&gt;<br />&lt;namespacedoc&gt;&lt;summary&gt;Functionality to support literate programming for F# scripts&lt;/summary&gt;&lt;/namespacedoc&gt;</em></div>
<div class="fsdocs-tip" id="fs15">static member Literate.ParseScriptString: content: string * ?path: string * ?fscOptions: string * ?definedSymbols: string list * ?references: bool * ?fsiEvaluator: IFsiEvaluator * ?parseOptions: MarkdownParseOptions * ?rootInputFolder: string * ?onError: (string -&gt; unit) -&gt; LiterateDocument</div>
<div class="fsdocs-tip" id="fs16">static member Literate.ToHtml: doc: LiterateDocument * ?prefix: string * ?lineNumbers: bool * ?generateAnchors: bool * ?substitutions: (FSharp.Formatting.Templating.ParamKey * string) list * ?crefResolver: (string -&gt; (string * string) option) * ?mdlinkResolver: (string -&gt; string option) * ?tokenKindToCss: (FSharp.Formatting.CodeFormat.TokenKind -&gt; string) -&gt; string</div>
<div class="fsdocs-tip" id="fs17">val fsiEvaluator: FsiEvaluator</div>
<div class="fsdocs-tip" id="fs18">member FsiEvaluator.RegisterTransformation: f: (obj * System.Type * int -&gt; MarkdownParagraph list option) -&gt; unit</div>
<div class="fsdocs-tip" id="fs19">val o: obj</div>
<div class="fsdocs-tip" id="fs20">val ty: System.Type</div>
<div class="fsdocs-tip" id="fs21">val _executionCount: int</div>
<div class="fsdocs-tip" id="fs22">property System.Type.IsGenericType: bool with get</div>
<div class="fsdocs-tip" id="fs23">System.Type.GetGenericTypeDefinition() : System.Type</div>
<div class="fsdocs-tip" id="fs24">val typedefof&lt;&#39;T&gt; : System.Type</div>
<div class="fsdocs-tip" id="fs25">type &#39;T list = List&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs26">val items: MarkdownParagraph list list</div>
<div class="fsdocs-tip" id="fs27">val it: obj</div>
<div class="fsdocs-tip" id="fs28">module Seq

from Microsoft.FSharp.Collections</div>
<div class="fsdocs-tip" id="fs29">val cast: source: System.Collections.IEnumerable -&gt; &#39;T seq</div>
<div class="fsdocs-tip" id="fs30">type obj = System.Object</div>
<div class="fsdocs-tip" id="fs31">val unbox: value: objnull -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs32">union case MarkdownParagraph.Paragraph: body: MarkdownSpans * range: MarkdownRange option -&gt; MarkdownParagraph</div>
<div class="fsdocs-tip" id="fs33">Multiple items<br />union case MarkdownSpan.Literal: text: string * range: MarkdownRange option -&gt; MarkdownSpan<br /><br />--------------------<br />type LiteralAttribute =
  inherit Attribute
  new: unit -&gt; LiteralAttribute<br /><br />--------------------<br />new: unit -&gt; LiteralAttribute</div>
<div class="fsdocs-tip" id="fs34">System.Object.ToString() : string</div>
<div class="fsdocs-tip" id="fs35">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs36">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs37">union case MarkdownParagraph.ListBlock: kind: MarkdownListKind * items: MarkdownParagraphs list * range: MarkdownRange option -&gt; MarkdownParagraph<br /><em>&lt;summary&gt;
 A Markdown List block
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs38">[&lt;Struct&gt;]
type MarkdownListKind =
  | Ordered
  | Unordered<br /><em>&lt;summary&gt;
   A list kind can be Ordered or Unordered corresponding to &lt;c&gt;&amp;lt;ol&amp;gt;&lt;/c&gt; and &lt;c&gt;&amp;lt;ul&amp;gt;&lt;/c&gt; elements
 &lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs39">union case MarkdownListKind.Ordered: MarkdownListKind</div>
<div class="fsdocs-tip" id="fs40">val listy: string</div>
<div class="fsdocs-tip" id="fs41">val docOl: LiterateDocument</div>

    </div>
</main>
<aside id="fsdocs-page-menu">
    <p id="on-this-page">On this page</p>
    <ul>
  <li class="level-1">
    <a href="#Embedding-script-output">
      Embedding script output
    </a>
  </li>
  <li class="level-2">
    <a href="#Including-Console-Output">
      Including Console Output
    </a>
  </li>
  <li class="level-2">
    <a href="#Using-AddPrinter-and-AddHtmlPrinter">
      Using AddPrinter and AddHtmlPrinter
    </a>
  </li>
  <li class="level-2">
    <a href="#Emitting-Raw-Text">
      Emitting Raw Text
    </a>
  </li>
  <li class="level-2">
    <a href="#F-Formatting-as-a-Library-Specifying-the-Evaluator-and-Formatting">
      F# Formatting as a Library:  Specifying the Evaluator and Formatting
    </a>
  </li>
  <li class="level-2">
    <a href="#F-Formatting-as-a-Library-Custom-formatting-functions">
      F# Formatting as a Library: Custom formatting functions
    </a>
  </li>
</ul>
</aside>
<dialog>
    <input type="search" placeholder="Search docs" />
    <div class="results">
        <ul></ul>
        <p class="empty">Type something to start searching.</p>
    </div>
</dialog>
<script type="module" src="https://fsprojects.github.io/FSharp.Formatting/content/fsdocs-tips.js"></script>
<script type="module" src="https://fsprojects.github.io/FSharp.Formatting/content/fsdocs-theme-toggle.js"></script>
<script type="module" src="https://fsprojects.github.io/FSharp.Formatting/content/fsdocs-details-toggle.js"></script>
<script type="module" src="https://fsprojects.github.io/FSharp.Formatting/content/fsdocs-theme.js"></script>
<script type="module" src="https://fsprojects.github.io/FSharp.Formatting/content/fsdocs-search.js"></script>

</body>
</html>